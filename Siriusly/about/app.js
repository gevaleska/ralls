// Article data
const articlesData = [
    {
        title: "Revolusi Pembelajaran Matematika di Era Digital",
        date: "10 September 2025",
        content: `
            <p>Era digital telah membawa perubahan fundamental dalam dunia pendidikan, khususnya dalam pembelajaran matematika. Sebagai seorang guru matematika dengan pengalaman 7 tahun, saya telah menyaksikan transformasi luar biasa dalam cara siswa berinteraksi dengan konsep-konsep matematika.</p>
            
            <h3>Tantangan Pembelajaran Tradisional</h3>
            <p>Metode pembelajaran matematika tradisional seringkali menghadapi kendala dalam membuat siswa memahami konsep abstrak. Banyak siswa yang merasa matematika adalah pelajaran yang sulit dan membosankan. Hal ini disebabkan oleh pendekatan yang terlalu fokus pada hafalan rumus tanpa pemahaman konsep yang mendalam.</p>
            
            <h3>Peran Teknologi dalam Pembelajaran</h3>
            <p>Teknologi digital menawarkan solusi inovatif untuk mengatasi tantangan tersebut. Dengan menggunakan aplikasi interaktif, simulasi, dan visualisasi 3D, konsep matematika yang abstrak dapat disajikan dalam bentuk yang lebih konkret dan mudah dipahami.</p>
            
            <h3>Implementasi Praktis</h3>
            <p>Dalam praktik mengajar saya, saya telah mengintegrasikan berbagai tools digital seperti:</p>
            <ul>
                <li>Software geometri dinamis untuk visualisasi bangun ruang</li>
                <li>Aplikasi grafik fungsi untuk memahami konsep kalkulus</li>
                <li>Platform gamifikasi untuk membuat pembelajaran lebih menarik</li>
                <li>Sistem manajemen pembelajaran (LMS) untuk monitoring progress siswa</li>
            </ul>
            
            <h3>Hasil dan Dampak</h3>
            <p>Implementasi teknologi dalam pembelajaran matematika telah menunjukkan hasil yang signifikan. Tingkat pemahaman siswa meningkat rata-rata 40%, dan motivasi belajar mereka juga mengalami peningkatan yang drastis. Siswa menjadi lebih aktif dalam bertanya dan mengeksplorasi konsep matematika secara mandiri.</p>
            
            <h3>Tantangan dan Solusi</h3>
            <p>Meskipun teknologi memberikan banyak manfaat, implementasinya juga menghadapi tantangan seperti keterbatasan infrastruktur dan resistensi terhadap perubahan. Untuk mengatasi hal ini, diperlukan pendekatan bertahap dan pelatihan yang berkelanjutan bagi para pendidik.</p>
            
            <h3>Visi Masa Depan</h3>
            <p>Kedepannya, saya yakin pembelajaran matematika akan semakin terintegrasi dengan teknologi emerging seperti AI, VR, dan AR. Hal ini akan membuka peluang pembelajaran yang lebih personal dan adaptive sesuai dengan kebutuhan masing-masing siswa.</p>
        `
    },
    {
        title: "Mengintegrasikan Informatika dalam Kurikulum Matematika",
        date: "5 September 2025",
        content: `
            <p>Integrasi informatika dan matematika bukan lagi sekadar tren, melainkan kebutuhan mendesak dalam sistem pendidikan modern. Melalui pengalaman mengajar selama bertahun-tahun, saya menemukan bahwa siswa lebih mudah memahami konsep abstrak matematika ketika disajikan melalui pendekatan komputasional.</p>
            
            <h3>Mengapa Integrasi Penting?</h3>
            <p>Di era digital ini, kemampuan computational thinking menjadi skill fundamental yang harus dimiliki siswa. Matematika dan informatika memiliki kaitan erat dalam hal logika, algoritma, dan pemecahan masalah sistematis.</p>
            
            <h3>Strategi Implementasi</h3>
            <h4>1. Pemrograman untuk Pemecahan Masalah Matematika</h4>
            <p>Mengajarkan siswa untuk menyelesaikan soal matematika menggunakan bahasa pemrograman seperti Python atau Scratch. Ini membantu siswa memahami langkah-langkah logis dalam pemecahan masalah.</p>
            
            <h4>2. Visualisasi Data dan Statistik</h4>
            <p>Menggunakan tools seperti Excel, Python matplotlib, atau R untuk menganalisis dan memvisualisasikan data statistik. Siswa dapat melihat pola dan tren dalam data secara langsung.</p>
            
            <h4>3. Simulasi dan Modeling</h4>
            <p>Membuat model matematika menggunakan software khusus untuk mensimulasikan fenomena nyata seperti pergerakan planet, pertumbuhan populasi, atau dinamika pasar.</p>
            
            <h3>Contoh Proyek Terintegrasi</h3>
            <h4>Proyek Analisis Trend Media Sosial</h4>
            <p>Siswa mengumpulkan data dari media sosial, melakukan analisis statistik, dan membuat prediksi menggunakan algoritma machine learning sederhana. Proyek ini menggabungkan konsep matematika (statistik, probabilitas) dengan skill informatika (data scraping, programming, visualization).</p>
            
            <h4>Proyek Optimasi Rute</h4>
            <p>Menggunakan algoritma graph theory untuk menyelesaikan masalah shortest path. Siswa belajar tentang konsep matematika diskrit sambil mengimplementasikannya dalam bentuk kode program.</p>
            
            <h3>Tools dan Platform Rekomendasi</h3>
            <ul>
                <li><strong>Scratch:</strong> Untuk pengenalan konsep programming dengan pendekatan visual</li>
                <li><strong>Python:</strong> Bahasa pemrograman yang mudah dipelajari dengan library matematika lengkap</li>
                <li><strong>GeoGebra:</strong> Software matematika dinamis untuk geometri dan kalkulus</li>
                <li><strong>Jupyter Notebook:</strong> Platform untuk kombinasi code, visualisasi, dan dokumentasi</li>
                <li><strong>Khan Academy:</strong> Resource pembelajaran dengan pendekatan gamifikasi</li>
            </ul>
            
            <h3>Manfaat yang Dirasakan</h3>
            <p>Dari pengamatan saya, siswa yang belajar matematika dengan pendekatan terintegrasi menunjukkan:</p>
            <ul>
                <li>Peningkatan kemampuan berpikir logis dan sistematis</li>
                <li>Motivasi belajar yang lebih tinggi karena melihat aplikasi nyata</li>
                <li>Kemampuan problem-solving yang lebih baik</li>
                <li>Persiapan yang lebih baik untuk karir di bidang STEM</li>
            </ul>
            
            <h3>Tips untuk Guru</h3>
            <p>Bagi rekan-rekan guru yang ingin mengimplementasikan pendekatan ini, saya sarankan untuk:</p>
            <ol>
                <li>Mulai dari yang sederhana - tidak perlu langsung menggunakan teknologi kompleks</li>
                <li>Fokus pada konsep, bukan tools - teknologi hanya alat bantu</li>
                <li>Berkolaborasi dengan guru informatika untuk sharing knowledge</li>
                <li>Terus belajar dan mengikuti perkembangan teknologi terbaru</li>
                <li>Libatkan siswa dalam memilih tools yang akan digunakan</li>
            </ol>
        `
    },
    {
        title: "Membangun Media Pembelajaran Interaktif dengan JavaScript",
        date: "1 September 2025",
        content: `
            <p>Dalam upaya meningkatkan kualitas pembelajaran, saya seringkali mengembangkan media pembelajaran interaktif menggunakan JavaScript. Artikel ini akan memandu Anda step-by-step dalam menciptakan media pembelajaran yang tidak hanya informatif tetapi juga engaging bagi siswa.</p>
            
            <h3>Mengapa JavaScript?</h3>
            <p>JavaScript dipilih karena beberapa keunggulan:</p>
            <ul>
                <li>Dapat berjalan di browser tanpa instalasi tambahan</li>
                <li>Syntax yang relatif mudah dipelajari</li>
                <li>Ecosystem yang luas dengan berbagai library pendukung</li>
                <li>Kemampuan interaktivitas yang tinggi</li>
                <li>Kompatibilitas lintas platform</li>
            </ul>
            
            <h3>Persiapan Development Environment</h3>
            <h4>Tools yang Dibutuhkan:</h4>
            <ul>
                <li>Text Editor (VS Code, Sublime Text, atau Atom)</li>
                <li>Web Browser modern (Chrome, Firefox, Safari)</li>
                <li>Basic knowledge HTML dan CSS</li>
                <li>Git untuk version control (opsional tapi recommended)</li>
            </ul>
            
            <h3>Struktur Dasar Media Pembelajaran</h3>
            <h4>1. HTML Foundation</h4>
            <pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="id"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Media Pembelajaran Matematika&lt;/title&gt;
    &lt;link rel="stylesheet" href="style.css"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div id="app"&gt;
        &lt;header&gt;
            &lt;h1&gt;Mari Belajar Matematika&lt;/h1&gt;
        &lt;/header&gt;
        &lt;main id="content"&gt;&lt;/main&gt;
        &lt;footer&gt;
            &lt;button id="next-btn"&gt;Selanjutnya&lt;/button&gt;
        &lt;/footer&gt;
    &lt;/div&gt;
    &lt;script src="app.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
            
            <h4>2. CSS Styling</h4>
            <p>Gunakan CSS untuk membuat interface yang menarik dan responsive. Fokus pada:</p>
            <ul>
                <li>Color scheme yang eye-friendly</li>
                <li>Typography yang mudah dibaca</li>
                <li>Layout yang intuitif</li>
                <li>Animations untuk feedback visual</li>
            </ul>
            
            <h4>3. JavaScript Functionality</h4>
            <pre><code>class LearningModule {
    constructor() {
        this.currentStep = 0;
        this.totalSteps = 5;
        this.userAnswers = [];
        this.init();
    }
    
    init() {
        this.loadStep(this.currentStep);
        this.bindEvents();
    }
    
    loadStep(stepIndex) {
        const content = this.getStepContent(stepIndex);
        document.getElementById('content').innerHTML = content;
    }
    
    bindEvents() {
        document.getElementById('next-btn')
            .addEventListener('click', () => this.nextStep());
    }
    
    nextStep() {
        if (this.currentStep < this.totalSteps - 1) {
            this.currentStep++;
            this.loadStep(this.currentStep);
        }
    }
}</code></pre>
            
            <h3>Fitur-Fitur Interaktif</h3>
            
            <h4>1. Quiz Interaktif</h4>
            <p>Implementasi sistem quiz dengan immediate feedback:</p>
            <pre><code>function createQuiz(question, options, correctAnswer) {
    return {
        question,
        options,
        correctAnswer,
        checkAnswer(userAnswer) {
            return userAnswer === this.correctAnswer;
        },
        generateHTML() {
            return \`
                &lt;div class="quiz-container"&gt;
                    &lt;h3&gt;\${this.question}&lt;/h3&gt;
                    \${this.options.map((option, index) =&gt; 
                        \`&lt;button class="option-btn" data-answer="\${index}"&gt;
                            \${option}
                        &lt;/button&gt;\`
                    ).join('')}
                &lt;/div&gt;
            \`;
        }
    };
}</code></pre>
            
            <h4>2. Visualisasi Matematika</h4>
            <p>Menggunakan Canvas API untuk membuat grafik dan animasi:</p>
            <pre><code>function drawFunction(canvas, func, range) {
    const ctx = canvas.getContext('2d');
    const width = canvas.width;
    const height = canvas.height;
    
    ctx.clearRect(0, 0, width, height);
    ctx.beginPath();
    
    for (let x = range.min; x <= range.max; x += 0.1) {
        const y = func(x);
        const canvasX = (x - range.min) / (range.max - range.min) * width;
        const canvasY = height - (y + 10) / 20 * height;
        
        if (x === range.min) {
            ctx.moveTo(canvasX, canvasY);
        } else {
            ctx.lineTo(canvasX, canvasY);
        }
    }
    
    ctx.stroke();
}</code></pre>
            
            <h4>3. Progress Tracking</h4>
            <p>Sistem untuk melacak kemajuan pembelajaran siswa:</p>
            <pre><code>class ProgressTracker {
    constructor() {
        this.progress = JSON.parse(localStorage.getItem('learningProgress')) || {};
    }
    
    updateProgress(moduleId, score) {
        this.progress[moduleId] = {
            score,
            completedAt: new Date().toISOString(),
            attempts: (this.progress[moduleId]?.attempts || 0) + 1
        };
        localStorage.setItem('learningProgress', JSON.stringify(this.progress));
    }
    
    getOverallProgress() {
        const modules = Object.keys(this.progress);
        const totalScore = modules.reduce((sum, moduleId) => 
            sum + this.progress[moduleId].score, 0);
        return modules.length > 0 ? totalScore / modules.length : 0;
    }
}</code></pre>
            
            <h3>Integration dengan Library External</h3>
            
            <h4>Chart.js untuk Visualisasi Data</h4>
            <pre><code>function createChart(canvasId, data) {
    const ctx = document.getElementById(canvasId).getContext('2d');
    return new Chart(ctx, {
        type: 'line',
        data: {
            labels: data.labels,
            datasets: [{
                label: 'Progress',
                data: data.values,
                borderColor: 'rgb(75, 192, 192)',
                fill: false
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
}</code></pre>
            
            <h4>Math.js untuk Komputasi Matematika</h4>
            <pre><code>// Evaluasi ekspresi matematika
function evaluateExpression(expression) {
    try {
        return math.evaluate(expression);
    } catch (error) {
        return 'Error: Invalid expression';
    }
}
            
// Plotting fungsi matematika
function plotFunction(expression, xRange) {
    const points = [];
    for (let x = xRange[0]; x <= xRange[1]; x += 0.1) {
        try {
            const y = math.evaluate(expression, {x});
            points.push({x, y});
        } catch (error) {
            // Skip invalid points
        }
    }
    return points;
}</code></pre>
            
            <h3>Best Practices</h3>
            
            <h4>1. User Experience</h4>
            <ul>
                <li>Berikan feedback immediate untuk setiap interaksi</li>
                <li>Gunakan loading indicators untuk operasi yang membutuhkan waktu</li>
                <li>Implementasi error handling yang user-friendly</li>
                <li>Pastikan aplikasi responsive di berbagai device</li>
            </ul>
            
            <h4>2. Performance Optimization</h4>
            <ul>
                <li>Lazy loading untuk konten yang besar</li>
                <li>Debouncing untuk input yang frequent</li>
                <li>Caching untuk data yang sering diakses</li>
                <li>Minifikasi code untuk production</li>
            </ul>
            
            <h4>3. Accessibility</h4>
            <ul>
                <li>Semantic HTML untuk screen readers</li>
                <li>Keyboard navigation support</li>
                <li>Color contrast yang memadai</li>
                <li>Alt text untuk visual elements</li>
            </ul>
            
            <h3>Deployment dan Sharing</h3>
            <p>Setelah media pembelajaran selesai dibuat, Anda dapat:</p>
            <ul>
                <li>Host di GitHub Pages untuk akses gratis</li>
                <li>Deploy ke Netlify atau Vercel</li>
                <li>Package sebagai Progressive Web App (PWA)</li>
                <li>Integrate dengan Learning Management System (LMS)</li>
            </ul>
            
            <h3>Kesimpulan</h3>
            <p>Membangun media pembelajaran interaktif dengan JavaScript tidak hanya meningkatkan engagement siswa, tetapi juga memberikan fleksibilitas dalam penyampaian materi. Dengan pendekatan yang tepat dan tools yang sesuai, guru dapat menciptakan pengalaman pembelajaran yang memorable dan efektif.</p>
            
            <p>Ingatlah bahwa teknologi hanyalah alat - yang terpenting adalah bagaimana kita menggunakannya untuk mencapai tujuan pembelajaran yang telah ditetapkan.</p>
        `
    }
];

// DOM Content Loaded
document.addEventListener('DOMContentLoaded', function() {
    // Initialize all functionality
    initLoading();
    initNavigation();
    initTypingAnimation();
    initScrollAnimations();
    initCounters();
    initPortfolioFilter();
    initContactForm();
    initArticleModal();
    initSmoothScrolling();
});

// Loading Screen
function initLoading() {
    const loadingScreen = document.getElementById('loading-screen');
    
    window.addEventListener('load', function() {
        setTimeout(() => {
            loadingScreen.classList.add('hidden');
        }, 1500);
    });
}

// Navigation
function initNavigation() {
    const navbar = document.getElementById('navbar');
    const navToggle = document.getElementById('nav-toggle');
    const navMenu = document.getElementById('nav-menu');
    const navLinks = document.querySelectorAll('.nav-link');

    // Mobile menu toggle
    navToggle.addEventListener('click', function() {
        navToggle.classList.toggle('active');
        navMenu.classList.toggle('active');
    });

    // Close mobile menu when clicking on links
    navLinks.forEach(link => {
        link.addEventListener('click', function() {
            navToggle.classList.remove('active');
            navMenu.classList.remove('active');
        });
    });

    // Navbar scroll effect
    window.addEventListener('scroll', function() {
        if (window.scrollY > 50) {
            navbar.classList.add('scrolled');
        } else {
            navbar.classList.remove('scrolled');
        }
    });

    // Active link highlighting
    window.addEventListener('scroll', updateActiveLink);
    updateActiveLink();

    function updateActiveLink() {
        const sections = document.querySelectorAll('section[id]');
        const scrollPos = window.scrollY + 100;

        sections.forEach(section => {
            const sectionTop = section.offsetTop;
            const sectionHeight = section.offsetHeight;
            const sectionId = section.getAttribute('id');
            const correspondingLink = document.querySelector(`.nav-link[href="#${sectionId}"]`);

            if (scrollPos >= sectionTop && scrollPos < sectionTop + sectionHeight) {
                navLinks.forEach(link => link.classList.remove('active'));
                if (correspondingLink) {
                    correspondingLink.classList.add('active');
                }
            }
        });
    }
}

// Typing Animation
function initTypingAnimation() {
    const typingText = document.querySelector('.typing-text');
    if (!typingText) return;

    const text = typingText.textContent;
    typingText.textContent = '';
    
    let i = 0;
    const typeWriter = setInterval(() => {
        if (i < text.length) {
            typingText.textContent += text.charAt(i);
            i++;
        } else {
            clearInterval(typeWriter);
            // Remove cursor after typing is complete
            setTimeout(() => {
                typingText.style.borderRight = 'none';
            }, 1000);
        }
    }, 100);
}

// Scroll Animations
function initScrollAnimations() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
            }
        });
    }, observerOptions);

    // Add animation classes and observe elements
    const animatedElements = document.querySelectorAll(`
        .section-header,
        .about-description,
        .skill-item,
        .service-card,
        .portfolio-item,
        .article-card,
        .contact-form-container,
        .contact-info
    `);

    animatedElements.forEach((el, index) => {
        // Add staggered animation delays
        el.style.transitionDelay = `${index * 0.1}s`;
        
        // Add appropriate animation class
        if (index % 3 === 0) {
            el.classList.add('fade-in');
        } else if (index % 3 === 1) {
            el.classList.add('slide-in-left');
        } else {
            el.classList.add('slide-in-right');
        }
        
        observer.observe(el);
    });
}

// Animated Counters
function initCounters() {
    const counterElements = document.querySelectorAll('.stat-number');
    
    const counterObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                animateCounter(entry.target);
                counterObserver.unobserve(entry.target);
            }
        });
    }, { threshold: 0.5 });

    counterElements.forEach(counter => {
        counterObserver.observe(counter);
    });

    function animateCounter(element) {
        const target = parseInt(element.getAttribute('data-count'));
        const duration = 2000; // 2 seconds
        const increment = target / (duration / 16); // 60fps
        let current = 0;

        const timer = setInterval(() => {
            current += increment;
            if (current >= target) {
                element.textContent = target;
                clearInterval(timer);
            } else {
                element.textContent = Math.floor(current);
            }
        }, 16);
    }
}

// Portfolio Filter
function initPortfolioFilter() {
    const filterBtns = document.querySelectorAll('.filter-btn');
    const portfolioItems = document.querySelectorAll('.portfolio-item');

    filterBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const filter = this.getAttribute('data-filter');
            
            // Update active button
            filterBtns.forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            
            // Filter items
            portfolioItems.forEach(item => {
                const category = item.getAttribute('data-category');
                
                if (filter === 'all' || category === filter) {
                    item.style.display = 'block';
                    item.style.opacity = '0';
                    item.style.transform = 'scale(0.8)';
                    
                    setTimeout(() => {
                        item.style.opacity = '1';
                        item.style.transform = 'scale(1)';
                    }, 100);
                } else {
                    item.style.opacity = '0';
                    item.style.transform = 'scale(0.8)';
                    setTimeout(() => {
                        item.style.display = 'none';
                    }, 300);
                }
            });
        });
    });
}

// Contact Form
function initContactForm() {
    const contactForm = document.getElementById('contact-form');
    
    contactForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const formData = new FormData(contactForm);
        const data = Object.fromEntries(formData);
        
        // Simulate form submission
        const submitBtn = contactForm.querySelector('button[type="submit"]');
        const originalText = submitBtn.innerHTML;
        
        submitBtn.innerHTML = '<span>Mengirim...</span>';
        submitBtn.disabled = true;
        
        setTimeout(() => {
            alert('Terima kasih! Pesan Anda telah terkirim. Saya akan segera merespon.');
            contactForm.reset();
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;
        }, 2000);
    });

    // Form validation
    const inputs = contactForm.querySelectorAll('.form-control');
    inputs.forEach(input => {
        input.addEventListener('blur', validateField);
        input.addEventListener('input', clearValidation);
    });

    function validateField(e) {
        const field = e.target;
        const value = field.value.trim();
        
        // Remove existing validation
        field.classList.remove('error');
        const existingError = field.parentNode.querySelector('.error-message');
        if (existingError) {
            existingError.remove();
        }
        
        // Validate based on field type
        let isValid = true;
        let errorMessage = '';
        
        if (field.hasAttribute('required') && !value) {
            isValid = false;
            errorMessage = 'Field ini wajib diisi';
        } else if (field.type === 'email' && value && !isValidEmail(value)) {
            isValid = false;
            errorMessage = 'Format email tidak valid';
        }
        
        if (!isValid) {
            field.classList.add('error');
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message';
            errorDiv.textContent = errorMessage;
            errorDiv.style.color = 'var(--color-error)';
            errorDiv.style.fontSize = 'var(--font-size-sm)';
            errorDiv.style.marginTop = 'var(--space-4)';
            field.parentNode.appendChild(errorDiv);
        }
    }

    function clearValidation(e) {
        const field = e.target;
        field.classList.remove('error');
        const existingError = field.parentNode.querySelector('.error-message');
        if (existingError) {
            existingError.remove();
        }
    }

    function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }
}

// Article Modal - Fixed implementation
function initArticleModal() {
    const articleCards = document.querySelectorAll('.article-card');
    const readMoreBtns = document.querySelectorAll('.read-more-btn');
    const modal = document.getElementById('article-modal');
    const modalTitle = document.getElementById('modal-title');
    const modalContent = document.getElementById('modal-content');
    const modalDate = document.querySelector('.modal-date');
    const modalClose = document.getElementById('modal-close');
    const modalOverlay = document.querySelector('.modal-overlay');

    function openArticleModal(articleIndex) {
        const article = articlesData[articleIndex];
        
        if (article) {
            modalTitle.textContent = article.title;
            modalDate.textContent = article.date;
            modalContent.innerHTML = article.content;
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }
    }

    // Event listeners for article cards
    articleCards.forEach(card => {
        card.addEventListener('click', function(e) {
            // Don't trigger if clicking on the button
            if (e.target.classList.contains('read-more-btn')) return;
            
            const articleIndex = parseInt(this.getAttribute('data-article'));
            openArticleModal(articleIndex);
        });
    });

    // Event listeners for read more buttons  
    readMoreBtns.forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.stopPropagation(); // Prevent card click event
            const articleCard = this.closest('.article-card');
            const articleIndex = parseInt(articleCard.getAttribute('data-article'));
            openArticleModal(articleIndex);
        });
    });

    // Close modal functions
    function closeModal() {
        modal.classList.add('hidden');
        document.body.style.overflow = 'auto';
    }

    if (modalClose) {
        modalClose.addEventListener('click', closeModal);
    }
    
    if (modalOverlay) {
        modalOverlay.addEventListener('click', closeModal);
    }

    // Close with Escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
            closeModal();
        }
    });
}

// Smooth Scrolling - Fixed implementation
function initSmoothScrolling() {
    const links = document.querySelectorAll('a[href^="#"]');
    
    links.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            
            const targetId = this.getAttribute('href');
            const targetSection = document.querySelector(targetId);
            
            if (targetSection) {
                const headerOffset = 80;
                const elementPosition = targetSection.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                
                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
            }
        });
    });
}

// Portfolio modal (for project details)
function initPortfolioModal() {
    const portfolioBtns = document.querySelectorAll('.portfolio-btn');
    
    portfolioBtns.forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.stopPropagation();
            const portfolioItem = this.closest('.portfolio-item');
            const title = portfolioItem.querySelector('.portfolio-title').textContent;
            const description = portfolioItem.querySelector('.portfolio-description').textContent;
            
            // Show project details in alert for now (can be enhanced with proper modal)
            alert(`Proyek: ${title}\n\nDeskripsi: ${description}\n\nFitur ini akan segera dikembangkan lebih lanjut dengan modal yang lebih detail.`);
        });
    });
}

// Initialize portfolio modal
document.addEventListener('DOMContentLoaded', function() {
    initPortfolioModal();
});

// Utility Functions
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

function throttle(func, limit) {
    let inThrottle;
    return function() {
        const args = arguments;
        const context = this;
        if (!inThrottle) {
            func.apply(context, args);
            inThrottle = true;
            setTimeout(() => inThrottle = false, limit);
        }
    }
}

// Performance optimizations
const debouncedResize = debounce(() => {
    // Handle resize events
    console.log('Window resized');
}, 250);

const throttledScroll = throttle(() => {
    // Handle scroll events
}, 16);

window.addEventListener('resize', debouncedResize);
window.addEventListener('scroll', throttledScroll);

// Easter egg - Konami code
let konamiCode = [];
const konamiSequence = [
    'ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown',
    'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight',
    'KeyB', 'KeyA'
];

document.addEventListener('keydown', function(e) {
    konamiCode.push(e.code);
    
    if (konamiCode.length > konamiSequence.length) {
        konamiCode.shift();
    }
    
    if (konamiCode.length === konamiSequence.length) {
        const isKonamiCode = konamiCode.every((code, index) => 
            code === konamiSequence[index]
        );
        
        if (isKonamiCode) {
            // Easter egg activated!
            const particles = document.querySelectorAll('.particle');
            particles.forEach(particle => {
                particle.style.background = `hsl(${Math.random() * 360}, 70%, 60%)`;
                particle.style.animationDuration = '1s';
            });
            
            setTimeout(() => {
                alert('🎉 Easter egg activated! Selamat, Anda menemukan kode rahasia!');
            }, 500);
            
            konamiCode = [];
        }
    }
});

// Dark mode toggle (bonus feature)
function initThemeToggle() {
    const themeToggle = document.createElement('button');
    themeToggle.innerHTML = '🌙';
    themeToggle.className = 'theme-toggle';
    themeToggle.style.cssText = `
        position: fixed;
        top: 50%;
        right: 20px;
        transform: translateY(-50%);
        background: var(--color-primary);
        color: var(--color-btn-primary-text);
        border: none;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        cursor: pointer;
        font-size: 1.2rem;
        z-index: 1000;
        box-shadow: var(--shadow-lg);
        transition: all var(--duration-normal) var(--ease-standard);
    `;
    
    document.body.appendChild(themeToggle);
    
    themeToggle.addEventListener('click', function() {
        const currentTheme = document.documentElement.getAttribute('data-color-scheme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        
        document.documentElement.setAttribute('data-color-scheme', newTheme);
        localStorage.setItem('theme', newTheme);
        
        this.innerHTML = newTheme === 'dark' ? '☀️' : '🌙';
    });
    
    // Load saved theme
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) {
        document.documentElement.setAttribute('data-color-scheme', savedTheme);
        themeToggle.innerHTML = savedTheme === 'dark' ? '☀️' : '🌙';
    }
}

// Initialize theme toggle
initThemeToggle();